<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Merger & Splitter Tool | seotools.site</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <style>
        :root {
            --primary-gradient: linear-gradient(90deg, #6A5ACD, #7B68EE);
            --accent-color: #4A90E2;
            --background-color: #F9FAFB;
            --text-primary: #333333;
            --text-secondary: #666666;
            --border-color: #E5E7EB;
            --card-bg: #FFFFFF;
            --success-color: #10B981;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background: var(--primary-gradient);
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: background 0.3s;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .tagline {
            text-align: center;
            margin-top: 10px;
            font-size: 14px;
            opacity: 0.9;
        }

        /* Main Content */
        .main-content {
            padding: 40px 0;
        }

        .tool-card {
            background-color: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            padding: 30px;
            margin-bottom: 30px;
        }

        .tool-header {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 15px;
        }

        .tab-btn {
            background: none;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-secondary);
            transition: all 0.3s;
        }

        .tab-btn.active {
            background-color: var(--accent-color);
            color: white;
        }

        .tool-description {
            color: var(--text-secondary);
            margin-bottom: 20px;
            font-size: 15px;
        }

        /* Upload Area */
        .upload-area {
            border: 2px dashed var(--border-color);
            border-radius: 16px;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 20px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .upload-area.active {
            border-color: var(--accent-color);
            background-color: rgba(74, 144, 226, 0.05);
        }

        .upload-icon {
            font-size: 48px;
            color: var(--accent-color);
            margin-bottom: 15px;
        }

        .upload-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .upload-subtitle {
            color: var(--text-secondary);
            margin-bottom: 20px;
            font-size: 14px;
        }

        .upload-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }

        .upload-btn:hover {
            background-color: #3a7bc8;
        }

        /* File List */
        .file-list {
            margin-top: 20px;
        }

        .file-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background-color: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .file-icon {
            color: var(--accent-color);
        }

        .file-info {
            flex-grow: 1;
        }

        .file-name {
            font-weight: 500;
        }

        .file-size {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .file-actions {
            display: flex;
            gap: 5px;
        }

        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        .action-btn:hover {
            color: var(--accent-color);
        }

        /* Splitter Options */
        .split-options {
            margin-top: 20px;
        }

        .option-group {
            margin-bottom: 15px;
        }

        .option-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .range-input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
        }

        .range-input:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .preview-area {
            margin-top: 20px;
            display: none;
        }

        .preview-title {
            font-weight: 600;
            margin-bottom: 10px;
        }

        .preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .page-thumbnail {
            width: 100px;
            height: 130px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f8f9fa;
            overflow: hidden;
        }

        .page-thumbnail img {
            max-width: 100%;
            max-height: 100%;
        }

        /* Action Buttons */
        .action-container {
            margin-top: 30px;
            text-align: center;
        }

        .action-btn-primary {
            background-color: #374151;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s;
        }

        .action-btn-primary:hover {
            background-color: #4B5563;
        }

        .action-btn-primary:disabled {
            background-color: #9CA3AF;
            cursor: not-allowed;
        }

        /* Progress Bar */
        .progress-container {
            margin-top: 20px;
            display: none;
        }

        .progress-bar {
            height: 6px;
            background-color: #E5E7EB;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--success-color);
            width: 0%;
            transition: width 0.3s;
        }

        .progress-text {
            text-align: center;
            margin-top: 8px;
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Success Message */
        .success-message {
            background-color: #D1FAE5;
            color: #065F46;
            padding: 12px 16px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
            align-items: center;
            gap: 10px;
        }

        .success-icon {
            color: var(--success-color);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .tool-header {
                flex-direction: column;
            }
            
            .tab-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <button class="back-btn">
                    <i class="fas fa-arrow-left"></i> Back to Main Page
                </button>
                <div class="logo">seotools.site</div>
            </div>
            <div class="tagline">Convert images, documents, audio, video across 150+ formats with professional quality</div>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="tool-card">
                <div class="tool-header">
                    <button class="tab-btn active" id="merge-tab">Merge PDF</button>
                    <button class="tab-btn" id="split-tab">Split PDF</button>
                </div>

                <!-- Merge PDF Section -->
                <div id="merge-section" class="tool-section">
                    <p class="tool-description">Combine multiple PDF files into a single document. Upload your files, arrange them in the desired order, and merge with one click.</p>
                    
                    <div class="upload-area" id="merge-upload-area">
                        <div class="upload-icon">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <div class="upload-title">Drop your PDF files here or click to browse</div>
                        <div class="upload-subtitle">Combine multiple PDFs into one — Fast, Secure & Free to Use</div>
                        <button class="upload-btn">Choose PDF Files</button>
                        <input type="file" id="merge-file-input" accept=".pdf" multiple style="display: none;">
                    </div>

                    <div class="file-list" id="merge-file-list"></div>

                    <div class="progress-container" id="merge-progress">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                        <div class="progress-text">Processing your files...</div>
                    </div>

                    <div class="success-message" id="merge-success">
                        <i class="fas fa-check-circle success-icon"></i>
                        <span>Your PDF files have been successfully merged!</span>
                    </div>

                    <div class="action-container">
                        <button class="action-btn-primary" id="merge-btn" disabled>
                            <i class="fas fa-object-group"></i> Merge PDFs
                        </button>
                    </div>
                </div>

                <!-- Split PDF Section -->
                <div id="split-section" class="tool-section" style="display: none;">
                    <p class="tool-description">Split a PDF document into multiple files. Extract specific pages or divide by page ranges.</p>
                    
                    <div class="upload-area" id="split-upload-area">
                        <div class="upload-icon">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <div class="upload-title">Drop your PDF file here or click to browse</div>
                        <div class="upload-subtitle">Split PDF into multiple files — Fast, Secure & Free to Use</div>
                        <button class="upload-btn">Choose PDF File</button>
                        <input type="file" id="split-file-input" accept=".pdf" style="display: none;">
                    </div>

                    <div class="file-list" id="split-file-list"></div>

                    <div class="split-options" id="split-options" style="display: none;">
                        <div class="option-group">
                            <label class="option-label">Split by page range (e.g., 1-3, 4-6)</label>
                            <input type="text" class="range-input" id="page-range" placeholder="Enter page ranges (e.g., 1-3, 5, 7-9)">
                        </div>
                    </div>

                    <div class="preview-area" id="preview-area">
                        <div class="preview-title">Page Preview</div>
                        <div class="preview-container" id="preview-container"></div>
                    </div>

                    <div class="progress-container" id="split-progress">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                        <div class="progress-text">Processing your file...</div>
                    </div>

                    <div class="success-message" id="split-success">
                        <i class="fas fa-check-circle success-icon"></i>
                        <span>Your PDF file has been successfully split!</span>
                    </div>

                    <div class="action-container">
                        <button class="action-btn-primary" id="split-btn" disabled>
                            <i class="fas fa-cut"></i> Split PDF
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Set up PDF.js worker
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';

        // DOM Elements
        const mergeTab = document.getElementById('merge-tab');
        const splitTab = document.getElementById('split-tab');
        const mergeSection = document.getElementById('merge-section');
        const splitSection = document.getElementById('split-section');
        
        const mergeUploadArea = document.getElementById('merge-upload-area');
        const splitUploadArea = document.getElementById('split-upload-area');
        const mergeFileInput = document.getElementById('merge-file-input');
        const splitFileInput = document.getElementById('split-file-input');
        
        const mergeFileList = document.getElementById('merge-file-list');
        const splitFileList = document.getElementById('split-file-list');
        
        const mergeBtn = document.getElementById('merge-btn');
        const splitBtn = document.getElementById('split-btn');
        
        const splitOptions = document.getElementById('split-options');
        const previewArea = document.getElementById('preview-area');
        const previewContainer = document.getElementById('preview-container');
        const pageRangeInput = document.getElementById('page-range');
        
        const mergeProgress = document.getElementById('merge-progress');
        const splitProgress = document.getElementById('split-progress');
        const mergeSuccess = document.getElementById('merge-success');
        const splitSuccess = document.getElementById('split-success');

        // File storage
        let mergeFiles = [];
        let splitFile = null;
        let pdfDoc = null;

        // Tab switching
        mergeTab.addEventListener('click', () => {
            mergeTab.classList.add('active');
            splitTab.classList.remove('active');
            mergeSection.style.display = 'block';
            splitSection.style.display = 'none';
        });

        splitTab.addEventListener('click', () => {
            splitTab.classList.add('active');
            mergeTab.classList.remove('active');
            splitSection.style.display = 'block';
            mergeSection.style.display = 'none';
        });

        // Upload area interactions
        mergeUploadArea.addEventListener('click', () => mergeFileInput.click());
        splitUploadArea.addEventListener('click', () => splitFileInput.click());

        // Drag and drop functionality
        function setupDragDrop(uploadArea, fileInput, isMultiple) {
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('active');
            });

            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('active');
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('active');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    if (isMultiple) {
                        handleMergeFiles(files);
                    } else {
                        handleSplitFile(files[0]);
                    }
                }
            });
        }

        setupDragDrop(mergeUploadArea, mergeFileInput, true);
        setupDragDrop(splitUploadArea, splitFileInput, false);

        // File input change handlers
        mergeFileInput.addEventListener('change', (e) => {
            handleMergeFiles(e.target.files);
        });

        splitFileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleSplitFile(e.target.files[0]);
            }
        });

        // Handle multiple files for merging
        function handleMergeFiles(files) {
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                if (file.type === 'application/pdf') {
                    mergeFiles.push({
                        file: file,
                        id: Date.now() + i
                    });
                }
            }
            renderMergeFileList();
            updateMergeButton();
        }

        // Handle single file for splitting
        function handleSplitFile(file) {
            if (file.type === 'application/pdf') {
                splitFile = file;
                renderSplitFileList();
                splitOptions.style.display = 'block';
                updateSplitButton();
                
                // Generate preview thumbnails
                generatePreview(file);
            }
        }

        // Render file list for merging
        function renderMergeFileList() {
            mergeFileList.innerHTML = '';
            
            if (mergeFiles.length === 0) {
                return;
            }
            
            mergeFiles.forEach((fileObj, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.draggable = true;
                fileItem.dataset.index = index;
                
                fileItem.innerHTML = `
                    <div class="file-icon">
                        <i class="fas fa-file-pdf"></i>
                    </div>
                    <div class="file-info">
                        <div class="file-name">${fileObj.file.name}</div>
                        <div class="file-size">${formatFileSize(fileObj.file.size)}</div>
                    </div>
                    <div class="file-actions">
                        <button class="action-btn move-up" ${index === 0 ? 'disabled' : ''}>
                            <i class="fas fa-arrow-up"></i>
                        </button>
                        <button class="action-btn move-down" ${index === mergeFiles.length - 1 ? 'disabled' : ''}>
                            <i class="fas fa-arrow-down"></i>
                        </button>
                        <button class="action-btn remove-file">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
                
                mergeFileList.appendChild(fileItem);
                
                // Add event listeners for actions
                const moveUpBtn = fileItem.querySelector('.move-up');
                const moveDownBtn = fileItem.querySelector('.move-down');
                const removeBtn = fileItem.querySelector('.remove-file');
                
                moveUpBtn.addEventListener('click', () => moveFileUp(index));
                moveDownBtn.addEventListener('click', () => moveFileDown(index));
                removeBtn.addEventListener('click', () => removeMergeFile(index));
            });
            
            // Add drag and drop for reordering
            setupDragAndDropReorder();
        }

        // Render file list for splitting
        function renderSplitFileList() {
            splitFileList.innerHTML = '';
            
            if (!splitFile) {
                return;
            }
            
            const fileItem = document.createElement('div');
            fileItem.className = 'file-item';
            
            fileItem.innerHTML = `
                <div class="file-icon">
                    <i class="fas fa-file-pdf"></i>
                </div>
                <div class="file-info">
                    <div class="file-name">${splitFile.name}</div>
                    <div class="file-size">${formatFileSize(splitFile.size)}</div>
                </div>
                <div class="file-actions">
                    <button class="action-btn remove-file">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            splitFileList.appendChild(fileItem);
            
            const removeBtn = fileItem.querySelector('.remove-file');
            removeBtn.addEventListener('click', () => {
                splitFile = null;
                renderSplitFileList();
                splitOptions.style.display = 'none';
                previewArea.style.display = 'none';
                updateSplitButton();
            });
        }

        // File manipulation functions
        function moveFileUp(index) {
            if (index > 0) {
                const temp = mergeFiles[index];
                mergeFiles[index] = mergeFiles[index - 1];
                mergeFiles[index - 1] = temp;
                renderMergeFileList();
            }
        }

        function moveFileDown(index) {
            if (index < mergeFiles.length - 1) {
                const temp = mergeFiles[index];
                mergeFiles[index] = mergeFiles[index + 1];
                mergeFiles[index + 1] = temp;
                renderMergeFileList();
            }
        }

        function removeMergeFile(index) {
            mergeFiles.splice(index, 1);
            renderMergeFileList();
            updateMergeButton();
        }

        // Drag and drop for reordering files
        function setupDragAndDropReorder() {
            const fileItems = mergeFileList.querySelectorAll('.file-item');
            
            fileItems.forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', item.dataset.index);
                    item.classList.add('dragging');
                });
                
                item.addEventListener('dragend', () => {
                    item.classList.remove('dragging');
                });
            });
            
            mergeFileList.addEventListener('dragover', (e) => {
                e.preventDefault();
                const afterElement = getDragAfterElement(mergeFileList, e.clientY);
                const draggable = document.querySelector('.dragging');
                if (afterElement == null) {
                    mergeFileList.appendChild(draggable);
                } else {
                    mergeFileList.insertBefore(draggable, afterElement);
                }
            });
            
            mergeFileList.addEventListener('drop', (e) => {
                e.preventDefault();
                const fromIndex = parseInt(e.dataTransfer.getData('text/plain'));
                const toIndex = getElementIndex(document.querySelector('.dragging'));
                
                if (fromIndex !== toIndex) {
                    const temp = mergeFiles[fromIndex];
                    mergeFiles.splice(fromIndex, 1);
                    mergeFiles.splice(toIndex, 0, temp);
                    renderMergeFileList();
                }
            });
        }

        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('.file-item:not(.dragging)')];
            
            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                
                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        function getElementIndex(element) {
            return Array.from(element.parentNode.children).indexOf(element);
        }

        // Generate preview thumbnails for PDF
        async function generatePreview(file) {
            previewArea.style.display = 'block';
            previewContainer.innerHTML = '<div>Loading preview...</div>';
            
            try {
                const arrayBuffer = await file.arrayBuffer();
                pdfDoc = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                
                previewContainer.innerHTML = '';
                
                // Show first 5 pages as preview
                const pageCount = Math.min(pdfDoc.numPages, 5);
                
                for (let i = 1; i <= pageCount; i++) {
                    const page = await pdfDoc.getPage(i);
                    const viewport = page.getViewport({ scale: 0.5 });
                    
                    const canvas = document.createElement('canvas');
                    const context = canvas.getContext('2d');
                    canvas.width = viewport.width;
                    canvas.height = viewport.height;
                    
                    await page.render({
                        canvasContext: context,
                        viewport: viewport
                    }).promise;
                    
                    const thumbnail = document.createElement('div');
                    thumbnail.className = 'page-thumbnail';
                    
                    const img = document.createElement('img');
                    img.src = canvas.toDataURL();
                    img.alt = `Page ${i}`;
                    
                    thumbnail.appendChild(img);
                    previewContainer.appendChild(thumbnail);
                }
                
                if (pdfDoc.numPages > 5) {
                    const moreText = document.createElement('div');
                    moreText.textContent = `... and ${pdfDoc.numPages - 5} more pages`;
                    moreText.style.width = '100%';
                    moreText.style.textAlign = 'center';
                    moreText.style.marginTop = '10px';
                    moreText.style.color = 'var(--text-secondary)';
                    previewContainer.appendChild(moreText);
                }
            } catch (error) {
                console.error('Error generating preview:', error);
                previewContainer.innerHTML = '<div>Error loading preview</div>';
            }
        }

        // Update button states
        function updateMergeButton() {
            mergeBtn.disabled = mergeFiles.length < 2;
        }

        function updateSplitButton() {
            splitBtn.disabled = !splitFile || !pageRangeInput.value.trim();
        }

        pageRangeInput.addEventListener('input', updateSplitButton);

        // Format file size
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Merge PDFs
        mergeBtn.addEventListener('click', async () => {
            if (mergeFiles.length < 2) return;
            
            mergeProgress.style.display = 'block';
            mergeSuccess.style.display = 'none';
            mergeBtn.disabled = true;
            
            try {
                const { PDFDocument } = PDFLib;
                const mergedPdf = await PDFDocument.create();
                
                for (let i = 0; i < mergeFiles.length; i++) {
                    const file = mergeFiles[i].file;
                    const arrayBuffer = await file.arrayBuffer();
                    const pdf = await PDFDocument.load(arrayBuffer);
                    const pages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
                    
                    pages.forEach(page => {
                        mergedPdf.addPage(page);
                    });
                    
                    // Update progress
                    const progressFill = mergeProgress.querySelector('.progress-fill');
                    progressFill.style.width = `${((i + 1) / mergeFiles.length) * 100}%`;
                }
                
                const mergedPdfBytes = await mergedPdf.save();
                const blob = new Blob([mergedPdfBytes], { type: 'application/pdf' });
                const url = URL.createObjectURL(blob);
                
                // Create download link
                const a = document.createElement('a');
                a.href = url;
                a.download = 'merged-document.pdf';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                // Show success message
                mergeProgress.style.display = 'none';
                mergeSuccess.style.display = 'flex';
                mergeBtn.disabled = false;
                
                // Hide success message after 5 seconds
                setTimeout(() => {
                    mergeSuccess.style.display = 'none';
                }, 5000);
                
            } catch (error) {
                console.error('Error merging PDFs:', error);
                alert('An error occurred while merging the PDF files. Please try again.');
                mergeProgress.style.display = 'none';
                mergeBtn.disabled = false;
            }
        });

        // Split PDF
        splitBtn.addEventListener('click', async () => {
            if (!splitFile) return;
            
            splitProgress.style.display = 'block';
            splitSuccess.style.display = 'none';
            splitBtn.disabled = true;
            
            try {
                const arrayBuffer = await splitFile.arrayBuffer();
                const pdfDoc = await PDFDocument.load(arrayBuffer);
                const pageCount = pdfDoc.getPageCount();
                
                // Parse page ranges
                const ranges = parsePageRanges(pageRangeInput.value, pageCount);
                
                if (ranges.length === 0) {
                    alert('Please enter valid page ranges');
                    splitProgress.style.display = 'none';
                    splitBtn.disabled = false;
                    return;
                }
                
                // Create a PDF for each range
                for (let i = 0; i < ranges.length; i++) {
                    const range = ranges[i];
                    const newPdf = await PDFDocument.create();
                    
                    for (let j = range.start; j <= range.end; j++) {
                        const [page] = await newPdf.copyPages(pdfDoc, [j - 1]);
                        newPdf.addPage(page);
                    }
                    
                    const pdfBytes = await newPdf.save();
                    const blob = new Blob([pdfBytes], { type: 'application/pdf' });
                    const url = URL.createObjectURL(blob);
                    
                    // Create download link
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `split-document-pages-${range.start}-${range.end}.pdf`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    // Update progress
                    const progressFill = splitProgress.querySelector('.progress-fill');
                    progressFill.style.width = `${((i + 1) / ranges.length) * 100}%`;
                }
                
                // Show success message
                splitProgress.style.display = 'none';
                splitSuccess.style.display = 'flex';
                splitBtn.disabled = false;
                
                // Hide success message after 5 seconds
                setTimeout(() => {
                    splitSuccess.style.display = 'none';
                }, 5000);
                
            } catch (error) {
                console.error('Error splitting PDF:', error);
                alert('An error occurred while splitting the PDF file. Please try again.');
                splitProgress.style.display = 'none';
                splitBtn.disabled = false;
            }
        });

        // Parse page ranges from input
        function parsePageRanges(input, maxPages) {
            const ranges = [];
            const parts = input.split(',');
            
            for (const part of parts) {
                const trimmed = part.trim();
                if (trimmed.includes('-')) {
                    const [startStr, endStr] = trimmed.split('-');
                    const start = parseInt(startStr);
                    const end = parseInt(endStr);
                    
                    if (!isNaN(start) && !isNaN(end) && start > 0 && end <= maxPages && start <= end) {
                        ranges.push({ start, end });
                    }
                } else {
                    const page = parseInt(trimmed);
                    if (!isNaN(page) && page > 0 && page <= maxPages) {
                        ranges.push({ start: page, end: page });
                    }
                }
            }
            
            return ranges;
        }
    </script>
</body>
</html>
